<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course Management System</title>
<link rel="stylesheet" href="manage_course.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <div class="main-container">
        <div class="title">
            <h1>Upload Courses</h1>
            <p>Add and manage course details efficiently!</p>
        </div>
        <div  class="card">
            <div style="float: right; font-size: 25px; cursor: pointer; margin: 0 15px 15px;" id="closeButton"><i class="fa-solid fa-xmark"></i></div>
            <form id="uploadForm">
                <section class="media_items">
                        <label>Media:</label>
                        <label for="video" class="upload-label">Upload Video <i class="fa-solid fa-video"></i></label>
                        <input type="file" name="video" id="video" accept="video/*" required>
                        <video id="videoPreview" controls style="display: none; width: 100%;"></video>

                        
                        
                        <label for="thumbnail" class="upload-label">Thumbnail <i class="fa-solid fa-image"></i></label>
                        <input type="file" id="thumbnail" name="thumbnail" accept="image/*" required>
                        <img id="thumbnailPreview" style="display: none; max-width: 200px;">

                        <button type="submit">Upload</button>
                    </section>
                <section class="media_details">
                        <label for="courseTitle">Course Title:</label>
                        <input type="text" id="courseTitle" name="courseTitle" required placeholder="Enter course title">
                        <div class="char-count">
                            Characters: <span id="charCount">0</span> / 20
                            <p id="T-error" class="error"> (Character limit exceeded!)</p>
                        </div>

                        <label for="description">Description:</label>
                        <textarea id="description" name="description" required placeholder="Enter course description"></textarea>
                        <div class="char-count">
                            Characters: <span id="DecharCount">0</span> / 100
                            <p id="D-error" class="error"> (Character limit exceeded!)</p>
                        </div>

                        <label for="schedule">Schedule:</label>
                        <input type="datetime-local" id="schedule" name="schedule">
                    </section>
            </form>

        </div>

        <section class="card course-list">
            <h2>Available Courses</h2>
            <ul id="courseList"></ul>
        </section>
    </div>

    <script>
        document.getElementById("closeButton").addEventListener("click", () => {
             document.getElementById("uploadForm").reset(); 
             document.getElementById("videoPreview").reset(); 
             document.getElementById("uploadForm").reset(); 
        });

        const titleInput = document.getElementById('courseTitle');
        const descripInput = document.getElementById('description');

        const titleCount = document.getElementById('charCount');
        const descripCount = document.getElementById('DecharCount');

        const titleErrorDisplay = document.getElementById('T-error');
        const descErrorDisplay = document.getElementById('D-error');

        titleInput.addEventListener('input', (e) => {
            const charCount = e.target.value.length;

            if (charCount <= 20) {
                titleCount.textContent = charCount; 
            } else {
                e.target.value = e.target.value.substring(0, 20); 
                titleErrorDisplay.style.display='block'
            }
        });
        
        
        descripInput.addEventListener('input', (e) => {
            const charCount = e.target.value.length;
            if (charCount <= 100) {
                descripCount.textContent = charCount; 
            } else {
                e.target.value = e.target.value.substring(0, 100); 
                descErrorDisplay.style.display='block'
            }
        });

        const videoInput = document.getElementById('video');
        const videoPreview = document.getElementById('videoPreview');

        videoInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const fileURL = URL.createObjectURL(file);
                videoPreview.src = fileURL;
                videoPreview.style.display = 'block';
            } else {
                videoPreview.style.display = 'none';
            }
        });


        const uploadForm = document.getElementById('uploadForm');
        const thumbnailInput = document.getElementById('thumbnail');
        const thumbnailPreview = document.getElementById('thumbnailPreview');
        const courseList = document.getElementById('courseList');

        uploadForm.addEventListener('submit', (event) => {
            event.preventDefault();

            const title = document.getElementById('courseTitle').value;
            const description = document.getElementById('description').value;
            const schedule = document.getElementById('schedule').value;
            const thumbnail = thumbnailInput.files[0];

            if (!title || !description || !schedule || !thumbnail) {
                alert('All fields are required!');
                return;
            }

            const reader = new FileReader();
            reader.onload = () => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div>
                        <img src="${reader.result}" alt="Thumbnail" style="width: 50px; height: 50px; border-radius: var(--border-radius);">
                        <div>
                            <strong>${title}</strong>
                            <p>${description}</p>
                            <small>Schedule: ${schedule}</small>
                        </div>
                    </div>
                    <button onclick="this.closest('li').remove()">Delete</button>
                `;
                courseList.appendChild(li);
            };
            reader.readAsDataURL(thumbnail);

            uploadForm.reset();
        });

        thumbnailInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = () => {
                    thumbnailPreview.src = reader.result;
                    thumbnailPreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
